# LandCLAN Coding Test 
Jonathan Ward, 5-April-2024

# The LandParcel repository application
* This application manages a simple database of 'LandParcel' objects
* Each LandParcel has:
  * ObjectId (long primary key)
  * Name (String)
  * Status (enum: SAVED, SHORT_LISTED, UNDER_CONSIDERATION, APPROVED)
  * Area (double)
  * Constraints (boolean)
* Simple CRUD operations are available on LandParcels

## Getting Started
* Run the application under Java 17+ (it has been tested against the corretto-17.0.10 JVM)
* Application.main() initialises via Spring Boot. Beans are autowired, so there is no explicit configuration.
* The application exposes a REST api, as described below
* An in-memory H2 database is used to store data. Data therefore does not persist between runs of the applicaiton.

## Assumptions and features
* objectId is the primary key and therefore immutable
* objectId is supplied by the user (they are not autogenerated)
* It is not possible to create a new LandParcel with the same objectId as and existing entry
* All other attributes of a LandParcel can be modified after creation
* It is possible to modify some or all attributes in a single request
* It is not possible to update a non-existant LandParcel (it must be created first)
* It is possible to delete a LandParcel by objectId, but it must already exist
* Violations of the above rules will generate 400 (BAD_REQUEST) or 404 (NOT_FOUND) status codes
* The internal 'ParcelStatus' enum has a NO_CHANGE value, to act as a 'null' to allow it to be left alone when other values are changed

## REST API
The application exposes a REST endpoint at `/landParcel`

This returns JSON data, and can be interacted with using the HTTP verbs:

* retrieve all parcels (using GET):

`curl "http://localhost:8080/landParcel"`

`[{"objectId":123,"name":"Alice House","status":"SAVED","area":42.0,"constraints":true},{"objectId":246,"name":"Bob Office","status":"APPROVED","area":27.0,"constraints":false},{"objectId":369,"name":"Charlie School","status":"SHORT_LISTED","area":103.0,"constraints":true},{"objectId":4812,"name":"David Field","status":"UNDER_CONSIDERATION","area":2.5,"constraints":false},{"objectId":51020,"name":"Eve Hospital","status":"SAVED","area":198.0,"constraints":true}]`

* retrieve specific parcel (using GET with objectId):

`curl "http://localhost:8080/landParcel/123"`

`{"objectId":123,"name":"Alice House","status":"SAVED","area":42.0,"constraints":true}`

* create new parcel (using POST with objectId and all atttributes):

`curl -X POST "http://localhost:8080/landParcel/6" -F "name=\"Fred\"" -F"status=SAVED" -F "area=42" -F "constraints=false"`

`{"objectId":6,"name":"Fred","status":"SAVED","area":42.0,"constraints":false}`

* update existing parcel (using PUT with objectId and attributes to be modified):

`curl -X PUT "http://localhost:8080/landParcel/6" -F "name=\"Fred Laboratory\"" -F "area=1.23"`

`{"objectId":6,"name":"Fred Laboratory","status":"SAVED","area":1.23,"constraints":false}`

* delete existing parcel (using DELETE with objectId):

`curl -X DELETE "http://localhost:8080/landParcel/6"`

## Testing
* The LandParcelServiceTests verify the business logic using a mocked repository
* The LandParcelControllerTest verify the controller, acting as more of an integration test. Repository is cleared between tests.

## Running the application
* sample data is available within the Application class; the 'demo' method populates the database on startup. This is commented-out in the code repository.
